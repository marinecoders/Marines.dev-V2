---
import Layout from '@layouts/Layout.astro';
import Hero from '@components/sections/Hero.svelte';
import MaxWidthContainer from '@components/sections/MaxWidthContainer.svelte';
import FooterFull from '@components/FooterFull.svelte';
import Countdown from '@components/elements/Countdown.svelte';
import Products from '@components/sections/Products.svelte';
import ContentImageFull from '../components/sections/ContentImageFull.svelte';
import { getCollection } from 'astro:content'; // Get products collection
import { displaySiteBanner } from '../components/stores.js';
import MetricCard from '@components/cards/MetricCard.svelte';
import { externalLinks } from '@content/externalLinks.js';
import '../styles/global.css';
import '../styles/fonts.css';

displaySiteBanner.set(true);

const products = await getCollection('products');
const metrics = await getCollection('aboutMetrics');

products.sort((a, b) => a.data.order - b.data.order);
---

<Layout title="Home">
  <Hero
    title="WE ARE THE MARINE INNOVATION UNIT"
    content="Innovate. Develop. Deploy. Transform the Marine Corps"
    link="/about"
    linkText="LEARN MORE"
    contentClasses={'text-base md:text-2xl'}
    backgroundImg="/images/headset_marine.png"
  />
  <MaxWidthContainer>
    <div class="max-w-[85rem] mx-auto px-4 sm:px-6 lg:px-8 pb-10">
      <h1 class="text-left md:text-center font-bold text-[32px] md:text-[40px] text-mcswf-gold pt-16 px-8">OUR MISSION</h1>
      <p class="text-left md:text-center text-base lg:text-2xl py-16 px-8">
        The Marine Innovation Unit (MIU) is the Marine Corps Reserve's premier innovation organization, focused on developing cutting-edge solutions, emerging technologies, and innovative approaches to enhance Marine Corps capabilities. We bridge the gap between traditional military operations and next-generation technology to provide decisive advantages on the battlefield.
      </p>

      <div class="relative grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 w-full justify-items-center">
        {
          metrics?.map((item) =>
            item.data.metrics?.map((p) => (
              <div class="text-center my-6">
                <MetricCard
                  icon={p.icon}
                  value={p.value}
                  metric={p.metric}
                />
              </div>
            ))
          )
        }
      </div>
    </div>
    <ContentImageFull
      image="/images/matt-11.png"
      link="#"
      linkText="LEARN MORE"
      title="WHAT WE DO"
      content="The Marine Innovation Unit focuses on rapid prototyping, technology integration, and innovative solutions for Marine Corps challenges. Our Marines work with cutting-edge technologies, industry partners, and academic institutions to develop next-generation capabilities that enhance Marine Corps readiness and effectiveness."
      imagePosition="right"
    />
    <ContentImageFull
      flipped
      image="/images/GenPuma.png"
      link="#"
      linkText="LEARN MORE"
      title="THE IMPACT"
      content="The MIU creates a unique environment where Marines can explore emerging technologies, develop innovative solutions, and apply cutting-edge capabilities to real-world Marine Corps challenges. Our approach combines military expertise with technological innovation to deliver transformative solutions that enhance Marine Corps effectiveness across all domains."
      imagePosition="left"
    />
    <!-- <div class="h-fit pt-20">
        <Products {products} />
      </div> -->
    <Countdown
      client:only="svelte"
      title="MIU INNOVATION PROGRAM APPLICATION DEADLINE"
      content="Applications for the next MIU Innovation Program cohort are due before January 15, 2025. Selected Marines will join our innovation teams to work on cutting-edge projects that directly impact Marine Corps capabilities."
    />
  </MaxWidthContainer>
  <FooterFull client:only="svelte" />
</Layout>
